
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Mention Humanités Numériques : Examen THYP</title>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    </head>

    <body>
        <div class="jumbotron jumbotron-fluid">
            <div class="container">
                <h2> Examen THYP </h2>
                <h5> Année 2020 - 2021 </h5>
            </div>
            <hr>
            
           
            
        </div>

        <div id="items"></div>

        <script type="text/javascript">
            function getData()
                {
                    let url ='https://polemika.univ-paris8.fr/omk/api/items?item_set_id=2';
                var csv_data;          
                var q = d3.queue()
                    .defer(d3.json, url)
                    .awaitAll(function(error, results) {
                        if (error) throw error;
                        csv_data=results;
                        console.log(csv_data);

                        showItems(results);

                    });
                }
               function showItems(data){
                 var infoItems= d3.select('#items')
                    .data(data);

                    data[0].forEach(function(d, j){
                        console.log(d["o:id"]);
                        infoItems.append('div').attr('class','col-2');
                      var card=  infoItems
                        .append('div').attr('class','col-8 ')
                        .style('text-align','center')
                        .style('margin-bottom','10px')
                        .append('div').attr('class','card shadow-none p-3 mb-5 bg-light rounded')
                        card.append('div').attr('class','card-header')
                    .append('h3').text('Identifiant : '+d["o:id"]); 

            d3.queue()
                    .defer(d3.json, d["o:media"][0]['@id'])
                    .awaitAll(function(error, results) {
                        if (error) throw error;
                        csv_data=results;

                       var body=card.append('div').attr('class','card-body');
                       body .append('h4').attr('class','card-title')
                    .text(d["o:title"]);
                    body .append("img")
                    .attr('src', csv_data[0]['o:thumbnail_urls']['large']);

                    });



                    infoItems.append('div').attr('class','col-2');
                    });
               }
            
            
      
        </script>
    </body>
</html>
